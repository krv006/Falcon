{#<div class="collapse navbar-collapse" id="navbarVerticalCollapse">#}
{#    <div class="navbar-vertical-content scrollbar">#}
{#        <ul class="navbar-nav flex-column mb-3" id="navbarVerticalNav">#}
{#            <li class="nav-item">#}
{#                {% for category in categories %}#}
{#                    <a class="nav-link {% if category.children.exists %}dropdown-indicator{% endif %}"#}
{#                       href="#{{ category.slug }}" role="button"#}
{#                       data-bs-toggle="collapse" aria-expanded="false" aria-controls="{{ category.slug }}">#}
{#                        <div class="d-flex align-items-center">#}
{#                                    <span class="nav-link-icon">#}
{#                                    <svg#}
{#                                            class="svg-inline--fa fa-shopping-cart fa-w-18" aria-hidden="true"#}
{#                                            focusable="false" data-prefix="fas" data-icon="shopping-cart" role="img"#}
{#                                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg="">#}
{#                                        <path#}
{#                                                fill="currentColor"#}
{#                                                d="M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"></path></svg>#}
{#                                        <!-- <span class="fas fa-shopping-cart"></span> Font Awesome fontawesome.com -->#}
{#                                    </span>#}
{#                            <span class="nav-link-text ps-1">{{ category.name }}</span>#}
{#                        </div>#}
{#                    </a>#}
{#                    {% if category.children.exists %}#}
{#                        <ul class="nav collapse" id="{{ category.slug }}">#}
{#                            {% for subcategory in category.children.all %}#}
{#                                <li class="nav-item">#}
{#                                    <a class="nav-link {% if subcategory.children.exists %}dropdown-indicator{% endif %} collapsed"#}
{#                                       href="#{{ subcategory.slug }}"#}
{#                                       data-bs-toggle="collapse" aria-expanded="false"#}
{#                                       aria-controls="e-commerce">#}
{#                                        <div class="d-flex align-items-center">#}
{#                                            <span class="nav-link-text ps-1">{{ subcategory.name }}</span>#}
{#                                        </div>#}
{#                                    </a>#}
{#                                    <!-- more inner pages-->#}
{#                                    {% if subcategory.children.exists %}#}
{#                                        <ul class="nav false collapse" id="{{ subcategory.slug }}">#}
{##}
{#                                            {% for inner_category in subcategory.children.all %}#}
{#                                                <li class="nav-item">#}
{#                                                    <a class="nav-link"#}
{#                                                       href="#{{ inner_category.slug }}"#}
{#                                                       aria-expanded="false">#}
{#                                                        <div class="d-flex align-items-center">#}
{#                                                            <span class="nav-link-text ps-1">{{ inner_category.name }}</span>#}
{#                                                        </div>#}
{#                                                    </a>#}
{#                                                </li>#}
{#                                            {% endfor %}#}
{#                                        </ul>#}
{#                                    {% endif %}#}
{#                                </li>#}
{#                            {% endfor %}#}
{#                        </ul>#}
{#                    {% endif %}#}
{#                {% endfor %}#}
{##}
{#            </li>#}
{#        </ul>#}
{#    </div>#}
{#</div>#}

{% load mptt_tags %}


<div class="collapse navbar-collapse" id="navbarVerticalCollapse">
    <div class="navbar-vertical-content scrollbar">
        <ul class="navbar-nav flex-column mb-3" id="navbarVerticalNav">
            {% recursetree categories %}
                <li class="nav-item">
                    <a class="nav-link {% if not node.is_leaf_node %}dropdown-indicator{% endif %}"
                       href="#{{ node.slug }}" role="button" data-bs-toggle="collapse" aria-expanded="false"
                       aria-controls="{{ node.slug }}">
                        <div class="d-flex align-items-center">
                            <span class="nav-link-icon">
                                <svg class="svg-inline--fa fa-shopping-cart fa-w-18" aria-hidden="true"
                                     focusable="false" data-prefix="fas" data-icon="shopping-cart" role="img"
                                     xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg="">
                                    <path fill="currentColor"
                                          d="M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"></path>
                                </svg>
                            </span>
                            <span class="nav-link-text ps-1">{{ node.name }}</span>
                        </div>
                    </a>
                    {% if not node.is_leaf_node %}
                        <ul class="nav collapse" id="{{ node.slug }}">
                            {{ children }}
                        </ul>
                    {% endif %}
                </li>
            {% endrecursetree %}
        </ul>
    </div>
</div>